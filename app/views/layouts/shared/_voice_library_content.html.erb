<%# --- START: The Fixed Header Section --- %>
<div class="shrink-0">
  <%# Call to Action: Explore Voice Library %>
  <div class="flex items-start gap-3 p-4 bg-shade rounded-lg relative">
    <div class="p-3 bg-gradient-purple text-reversed rounded-lg shadow-md">
      <span class="icon icon--apps" style="--icon-size: 1.5rem" aria-hidden="true"></span>
    </div>
    <div class="flex flex-col gap-half">
      <p class="font-semibold">Explore Voice Library</p>
      <p class="text-sm text-subtle">Find high quality voices from the community. Perfect for any occasion.</p>
    </div>
  </div>
</div>
<%# --- END: The Fixed Header Section --- %>

<%# --- START: The Scrollable List Section (Voice Selection) --- %>
<div class="flex flex-col grow overflow-y-auto mis-1 mbs-2 pbs-2">
  <div class="flex justify-between items-center mbe-2 mie-2">
    <p class="font-semibold">Default</p>
  </div>

  <%# This loop renders each voice as a selectable card. %>
  <% @voices.each do |voice| %>
    <%# The entire label is a clickable area for the hidden radio button inside it. %>
    <%= f.label :voice_id, value: voice.id, class: "card card--selectable p-3 flex items-start shadow-none mie-2 mbe-2 cursor-pointer" do %>
      
      <%# This radio button is visually hidden but provides the core functionality. %>
      <%= f.radio_button :voice_id, voice.id, class: "sr-only", data: { action: "voice-selector#select" } %>

      <%# --- Visual Content of the Card --- %>
      <div class="flex items-center justify-between gap-4 i-full">
        <%# NOTE: Using placeholder colors. You'll need to add color attributes to your Voice model or a helper. %>
        <span class="voice-swatch shrink-0" style="--icon-size: 2.1rem; background-image: radial-gradient(circle, #A5B4FC, #6366F1);" aria-hidden="true"></span>
        
        <div class="flex flex-col overflow-hidden">
          <p class="font-semibold"><%= voice.name %></p>
          <%# NOTE: Using available data for description. You might want a dedicated 'description' attribute on your Voice model. %>
          <p class="text-sm text-subtle overflow-ellipsis"><%= "#{voice.languages.first&.name} - #{voice.gender.capitalize}" %></p>
        </div>

        <div class="mis-auto shrink-0 flex items-center gap-2">
          <button type="button" class="btn btn--icon btn--subtle">
            <span class="icon icon--play" aria-hidden="true"></span>
          </button>
          <button type="button" class="btn btn--icon btn--subtle">
            <span class="icon icon--more-horizontal" aria-hidden="true"></span>
          </button>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
<%# --- END: The Scrollable List Section --- %>