<div class="hide@lg">
    <div data-sample-text-target="mobileInfo">
        <div class="responsive-padding flex flex-col gap-3">
            <div class="flex justify-between">

                <%#
                  THE FIX IS HERE:
                  We are adding `f: f` to the locals hash. This ensures that the
                  form builder variable, which was passed into this file, is now
                  passed down to the `_mobile_sheet_trigger`.
                %>
                <%= render partial: "layouts/shared/mobile_sheet_trigger", locals: {
                  label: "Voice Library",
                  content_partial: "layouts/shared/voice_library_content",
                  id_prefix: "mobile",
                  f: f,  # <-- THIS LINE FIXES THE ERROR
                  trigger: capture do %>
                    <button type="button" class="btn btn--icon rounded-lg" data-action="dialog#showModal">
                      <span class="voice-swatch" style="--icon-size: 1.2rem; background-image: radial-gradient(circle, #F9A8D4, #EC4899);" aria-hidden="true"></span>
                      Select voice
                    </button>
                  <% end
                } %>

                <div>
                    <%#
                      The "History" sheet trigger does NOT need `f`, so it remains unchanged.
                    %>
                    <%= render partial: "layouts/shared/mobile_sheet_trigger", locals: {
                        label: "History",
                        content_partial: "layouts/shared/history_content",
                        trigger: capture do %>
                        <button type="button" class="btn btn--icon rounded-lg" data-action="dialog#showModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
                        </button>
                        <% end
                    } %>
                </div>
            </div>

            <div>
              <%= button_tag "Convert Voice", class: "btn btn--primary block i-full", form: "voice_changer_form" %>
            </div>

            <div class="flex justify-between">
                <p class="text-subtle text-xs font-semibold">10,000 credits remaining</p>
                <%# Character count is not needed for voice changer, so I have removed it. %>
            </div>
        </div>
    </div>
</div>