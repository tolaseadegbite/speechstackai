<div class="hide@lg">
  <div data-sample-text-target="mobileInfo">
    <div class="responsive-padding flex flex-col gap-3">
      <div class="flex justify-between">
        
        <%= render partial: "layouts/shared/mobile_sheet_trigger", locals: { 
          label: "Voice Library", 
          content_partial: "layouts/shared/voice_library_content", 
          context: :mobile,
          f: f,
          trigger: capture do %>
            <button type="button" class="btn btn--icon rounded-lg" data-action="dialog#showModal">
              <span class="voice-swatch" style="--icon-size: 1.2rem; background-image: radial-gradient(circle, #F9A8D4, #EC4899);" aria-hidden="true"></span>
              Select voice
            </button>
          <% end 
        } %>

        <div>
          <%# THE FIX: Changed `id_prefix: "mobile"` to `context: :mobile` for consistency. %>
          <%= render partial: "layouts/shared/mobile_sheet_trigger", locals: { 
            label: "History", 
            content_partial: "layouts/shared/history_content",
            context: :mobile, 
            generated_audio_clips: @generated_audio_clips,
            trigger: capture do %>
              <button type="button" class="btn btn--icon rounded-lg" data-action="dialog#showModal">
                <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
              </button>
            <% end 
          } %>
        </div>

      </div>

      <div>
        <%= button_tag type: "submit", class: "btn btn--primary block i-full", form: "text_to_speech_form" do %>
          <span data-form-submit-target="label">Generate speech</span>
        <% end %>
      </div>
      <div class="flex justify-between">
          <p class="text-subtle text-xs font-semibold"><%= current_user.credits %> credits remaining</p>
          <p class="text-subtle text-xs font-semibold">
            <span data-character-counter-target="count">0</span> / 5,000 characters
          </p>
      </div>
    </div>
  </div>
</div>