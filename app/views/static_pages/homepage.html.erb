<% content_for :title, "Text to Speech for African Languages" %>

<%
  # 1. Configuration
  # We added the "african-tts-audio/" folder prefix to the keys so S3 can find them.
  voice_config = {
    "Akinolú" => { 
      image: "landing page/Yoruba man.png",     
      color: "red",
      key: "african-tts-audio/f6a7002e-dcff-4a47-99ef-2da06dc6eace.wav" 
    },
    "Ọmọ́wùnmí" => { 
      image: "landing page/Yoruba woman 1.jpg", 
      color: "orange",
      key: "african-tts-audio/0e0ee16e-3076-4118-86fd-31f728e9d574.wav" 
    },
    "Kwame" => { 
      image: "landing page/Asante_twi.png",     
      color: "gray",
      key: "african-tts-audio/38d3f1e9-24ee-40f0-b62d-bd1e7dd24710.wav" 
    },
    "Kwesi" => { 
      image: "landing page/akwapem_twi.jpg",    
      color: "teal",
      key: "african-tts-audio/b7004abf-b71c-4faa-8ff6-7b0c5bf55b10.wav" 
    },
    "Uzima" => { 
      image: "landing page/Lingala_man.png",    
      color: "blue",
      key: "african-tts-audio/bd2a43b6-c495-41a9-87d8-a20ac5945628.wav" 
    },
    "Danjuma" => { 
      image: "landing page/Hausa man 2.png",    
      color: "green",
      key: "african-tts-audio/5fef3ae2-fa7b-4f62-999f-4ad9003096d8.wav" 
    },
    "Kofi" => { 
      image: "landing page/Yoruba man.png",     
      color: "cyan",
      key: "african-tts-audio/44004682-923e-4487-8b80-b10cc11acbd9.wav" 
    },
    "Àrẹ̀mú" => { 
      image: "landing page/Yoruba_man_2.png",   
      color: "yellow",
      key: "african-tts-audio/8f5cb648-c13e-4cab-a9ed-81588d3e89f5.wav" 
    }
  }

  playground_voices = Voice.where(name: voice_config.keys).index_by(&:name)
%>

<section class="header flex flex-col gap-8 items-center mi-auto" style="margin-bottom: 5dvh; margin-top: 5dvh;">
  
  <h1 class="font-bold text-center" style="font-size: 6vh; text-shadow: horizontal-offset vertical-offset blur-radius black; max-inline-size: 48rem;">Give your content <span class="text-green-600">an authentic african voice</span></h1>
  <p class="text-subtle text-lg" style="max-width: 40rem">Natural-sounding Text-to-Speech for Yoruba, Asante-Twi, Akwapem-Twi, Hausa, Ewe, and Lingala. Perfect for news, narration, and customer support.</p>

  <div class="flex items-center gap-4 align-center justify-center">
    <%= link_to text_to_speech_path, class: "btn btn--positive text-lg" do %>
      Try it for free
      <span class="icon icon--move-right p-3"></span>
    <% end %>
  </div>

  <div class="header-playground mb-5" data-controller="audio-fetcher">
    <div class="flex flex-wrap gap-10 rounded-lg p-5 justify-center">

      <% voice_config.each do |name, config| %>
        <% voice = playground_voices[name] %>
        
        <% if voice %>
          <% 
             # Your helper now receives the full path (folder/filename)
             secure_audio_url = presigned_s3_url(config[:key])
          %>

          <div class="relative">
            <div class="text-center mbe-3">
              <h3 class="text-lg font-semibold"><%= voice.name %></h3>
              <p class="text-subtle text-sm"><%= voice.languages.first&.name || "African Voice" %></p>
            </div>
            
            <%= image_tag(config[:image], class: "rounded-full border-4 border-#{config[:color]}-500 shadow-lg", size: "130") %>
            
            <button type="button" 
                    class="btn btn--primary rounded-full p-1 border absolute" 
                    style="left: 6rem; bottom: 8rem;"
                    data-action="click->audio-fetcher#fetch"
                    data-audio-fetcher-url-param="<%= secure_audio_url %>"
                    data-audio-fetcher-title-param="<%= voice.name %>"
                    data-audio-fetcher-author-param="<%= voice.user&.name || 'Community Voice' %>"
                    data-audio-fetcher-filename-param="<%= "#{voice.name.parameterize}.wav" %>"
                    data-audio-fetcher-gradient-start-param="<%= voice.gradient_start %>"
                    data-audio-fetcher-gradient-end-param="<%= voice.gradient_end %>"
                    data-audio-fetcher-created-at-param="<%= voice.created_at.strftime('%-d/%-m/%Y') %>"
                    
                    <%# --- ADD THIS LINE --- %>
                    data-audio-fetcher-show-player-param="false">
              
              <div data-play-icon-url="<%= secure_audio_url %>">
                <span class="icon icon--play"></span>
              </div>
            </button>
          </div>
        <% end %>
      <% end %>

    </div>
  </div>
</section>

<section class="flex flex-col gap-10 items-center text-center mi-auto" style="margin-bottom: 8rem; margin-top: 5rem; max-width: 58rem">
  <div class="flex flex-col gap-2 items-center">
    <span class="badge badge--secondary rounded-full text-sm mbe-2 pi-4 pb-2">See it in action</span>
    <h1 class="font-bold" style="font-size: 4vh; text-shadow: horizontal-offset vertical-offset blur-radius black;">Generate speech in minutes</span></h1>
    <p class="text-subtle text-lg" style="max-width: 40rem">Our models generates naturally speaking speech</p>
  </div>

  <%= image_tag("landing page/image_home.png", class: "rounded-3xl border p-3 shadow-lg") %>

  <div class="flex flex-col gap-4">
    <%= link_to "Try it yourself", text_to_speech_path, class: "btn btn--primary" %>
    <p class="text-subtle text-sm">Start with 5 free credits</p>
  </div>
</section>

<section class="flex flex-col gap-10 items-center text-center mi-auto" style="margin-bottom: 8rem; margin-top: 8rem;" id="how_it_works">
  <div class="flex flex-col gap-2 items-center">
    <span class="badge badge--secondary rounded-full text-sm mbe-2 pi-4 pb-2">Natural sounding speech generation</span>
    <h2 class="font-bold" style="font-size: 4vh; text-shadow: horizontal-offset vertical-offset blur-radius black;">How it works</span></h2>
    <p class="text-subtle text-lg" style="max-width: 40rem">A straightforward process without technical complexities.</p>
  </div>

  <div class="grid grid-cols-1 grid-cols-2@sm grid-cols-2@md grid-cols-3@lg gap-4">
    <div class="card flex flex-col gap border shadow-lg">
      <div class="flex items-center gap justify-center">
        <span class="icon icon--book-open"></span>
        <h2 class="font-semibold text-xl">Input Text & Select Voice</h2>
      </div>
      
      <p class="text-subtle text-sm">Enter your text, choose an authentic African voice that suits your content, and click the submit button.</p>
    </div>

    <div class="card flex flex-col gap border shadow-lg">
      <div class="flex items-center gap justify-center">
        <span class="icon icon--play"></span>
        <h2 class="font-semibold text-xl">Play and Download Audio</h2>
      </div>

      <p class="text-subtle text-sm">Once the speech is generated, you can listen to it and download the audio file for your use.</p>
    </div>

    <div class="card flex flex-col gap border shadow-lg">
      <div class="flex items-center gap justify-center">
        <span class="icon icon--x"></span>
        <h2 class="font-semibold text-xl">No Subscriptions</h2>
      </div>

      <p class="text-subtle text-sm">Pay-as-you-go pricing model with no subscriptions or hidden fees. Purchase credits as needed.</p>
    </div>
  </div>
    
</section>

<section class="flex flex-col gap-10 items-center mi-auto" style="margin-bottom: 8rem; margin-top: 8rem;" id="join">
  <div class="flex flex-col gap-2 items-center">
    <span class="badge badge--secondary rounded-full text-sm mbe-2 pi-4 pb-2">Launch with us</span>
    <h2 class="font-bold" style="font-size: 4vh; text-shadow: horizontal-offset vertical-offset blur-radius black;">Join the Beta launch</span></h2>
    <p class="text-subtle text-lg text-center" style="max-width: 40rem">Get free, extended access to 2yarn and help us build the future of natural sounding speech generation</p>
  </div>

  <!-- Embedded Sign-Up Form -->
  <div class="mbs-4" style="max-inline-size: 400px; inline-size: 100%;">
      <%= form_with url: sign_up_path, html: { autocomplete: "off" }, class: "card flex flex-col gap text-start text-primary" do |form| %>
          <div class="flex flex-col gap-half">
              <%= form.label :name, class: "text-sm font-medium leading-none font-semibold" %>
              <%= form.text_field :name, placeholder: "John Doe", required: true, class: "input" %>
          </div>

          <div class="flex flex-col gap-half">
              <%= form.label :email, "Email", class: "text-sm font-medium leading-none font-semibold" %>
              <%= form.email_field :email, placeholder: "you@example.com", required: true, class: "input" %>
          </div>
          
          <div class="flex flex-col gap-half">
              <%= form.label :password, class: "text-sm font-medium leading-none font-semibold" %>
              <%= form.password_field :password, placeholder: "************", required: true, class: "input" %>
          </div>

          <%= form.submit "Get My Free Account", class: "btn btn--primary mbs-2" %>
      <% end %>
      <p class="text-xs mbs-2">No credit card required. Ever.</p>
  </div>

  <!--<div class="grid grid-cols-1 grid-cols-2@sm grid-cols-2@md grid-cols-3@lg gap-4 i-full">
    
    <%# --- CARD 1: The Starter --- %>
    <div class="card flex flex-col gap-4 border shadow-xl bg-primary pb-6 pi-3 relative">
      <div class="flex items-center gap-2">
        <h2 class="font-semibold text-3xl">Starter</h2>
      </div>
      <p class="text-subtle">Perfect for short projects</p>
      <h3 class="font-bold text-4xl">$4.99</h3>
      
      <div class="flex flex-col gap-2">
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class=""><span class="text-2xl font-semibold">5</span> Credits</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Download audio files</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">All available voices</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Approx. 3 minutes of audio</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Human support</p>
        </div>
      </div>

      <%= link_to "Buy 5 credits", text_to_speech_path, class: "btn btn--primary" %>
    </div>

    <%# --- CARD 2: The Most Popular (with visual highlight) --- %>
    <div class="card flex flex-col gap-4 border-2 border-green-400 shadow-xl bg-primary pb-6 pi-3 relative h-50dvh">
      <div class="flex items-center gap-2">
        <h2 class="font-semibold text-3xl">Creator</h2>
        <span class="badge badge--positive rounded-full text-xs pi-4 pb-1 border border-green-600">Most Popular</span>
      </div>
      <p class="text-subtle">Our best value for regular use</p>
      <h3 class="font-bold text-4xl">$9.99</h3>
      
      <div class="flex flex-col gap-2">
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class=""><span class="text-2xl font-semibold">15</span> Credits</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Download audio files</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">All available voices</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Approx. 10 minutes of audio</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Human support</p>
        </div>
      </div>

      <%= link_to "Buy 15 credits", text_to_speech_path, class: "btn btn--positive" %> <%# Use a different button color to draw attention %>
    </div>

    <%# --- CARD 3: The Power User --- %>
    <div class="card flex flex-col gap-4 shadow-xl bg-primary pb-6 pi-3 relative">
      <div class="flex items-center gap-2">
        <h2 class="font-semibold text-3xl">Pro</h2>
      </div>
      <p class="text-subtle">Best for narration and large projects</p>
      <h3 class="font-bold text-4xl">$24.99</h3>
      
      <div class="flex flex-col gap-2">
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class=""><span class="text-2xl font-semibold">50</span> Credits</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Download audio files</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">All available voices</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Approx. 35 minutes of audio</p>
        </div>
        
        <div class="flex items-center gap">
          <span class="relative icon icon--check p-3 text-green-500" style="top: 2px;"></span>
          <p class="text-md">Priority human support</p>
        </div>
      </div>

      <%= link_to "Buy 50 credits", text_to_speech_path, class: "btn btn--primary" %> <%# Use a different button color to draw attention %>
    </div>

  </div>-->
</section>

<section class="flex flex-col gap-10 items-center mi-auto" style="margin-bottom: 8rem; margin-top: 8rem; max-width: 58rem" id="faqs">
  <div class="flex flex-col gap-2 items-center">
    <h2 class="font-bold" style="font-size: 4vh; text-shadow: horizontal-offset vertical-offset blur-radius black;">FAQs</span></h2>
    <p class="text-subtle text-lg" style="max-width: 40rem">How the TTS service works and what you can expect.</p>
  </div>

  <div class="accordion i-full">
    <details name="my_accordion">
      <summary class="cursor-pointer font-medium">What languages and dialects do you support?</summary>
      <p class="pbe-4 text-subtle">
        We specialize in providing high-quality, natural-sounding voices for a growing list of African languages. Currently, we offer support for Yoruba, Asante-Twi, Akwapem-Twi, Hausa, Ewe, and Lingala. We are continuously training new models and plan to expand our language library in the future.
      </p>
    </details>
    <details name="my_accordion">
      <summary class="cursor-pointer font-medium">How does the credit system work?</summary>
      <p class="pbe-4 text-subtle">
        Our pricing is a simple pay-as-you-go model. You purchase credits, and those credits are used to generate audio. The number of credits consumed depends on the number of characters in your text. This means you only pay for what you use, with no monthly subscriptions, hidden fees, or recurring charges. Your credits never expire.
      </p>
    </details>
    <details name="my_accordion">
      <summary class="cursor-pointer font-medium">Can I use the generated audio for commercial purposes?</summary>
      <p class="pbe-4 text-subtle">
        Yes, absolutely. Once you generate an audio file, you own the rights to it. You are free to use the audio for any personal or commercial project, including YouTube videos, podcasts, advertisements, e-learning courses, and customer support systems without any additional fees or royalties.
      </p>
    </details>
    <details name="my_accordion">
      <summary class="cursor-pointer font-medium">What audio format can I download?</summary>
      <p class="pbe-4 text-subtle">
        All generated audio is provided in a high-quality MP3 format. This format offers an excellent balance of quality and file size, making it compatible with virtually all devices, software, and online platforms.
      </p>
    </details>
    <details name="my_accordion">
      <summary class="cursor-pointer font-medium">How do I get started?</summary>
      <p class="pbe-4 text-subtle">
        Getting started is easy! Simply sign up for a free account to receive 5 complimentary credits. You can use these credits immediately to generate your first audio clips and test our voices. If you like the results, you can purchase more credits from our pricing section.
      </p>
    </details>
  </div>
    
</section>