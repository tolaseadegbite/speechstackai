<%# You may want to create a helper to provide colors for different feedback types %>
<%# e.g., feedback_type_badge_class(feedback.feedback_type) %>
<%
  badge_color = {
    review: "bg-blue-100 text-blue-800",
    bug_report: "bg-red-100 text-red-800",
    feature_request: "bg-purple-100 text-purple-800",
    general: "bg-gray-100 text-gray-800",
    other: "bg-yellow-100 text-yellow-800"
  }.fetch(feedback.feedback_type.to_sym, "bg-gray-100 text-gray-800")
%>

<div id="<%= dom_id feedback %>" class="p-4 rounded-lg border border-gray-200 bg-white shadow-sm">
  <div class="flex justify-between items-start">
    <%# User and Metadata %>
    <div class="flex items-center gap-3">
      <div class="flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 text-gray-600 font-semibold">
        <%= feedback.user.name&.first || feedback.user.email.first.upcase %>
      </div>
      <div>
        <p class="font-semibold"><%= feedback.user.name || feedback.user.email %></p>
        <p class="text-sm text-subtle">
          Submitted <%= time_ago_in_words(feedback.created_at) %> ago
        </p>
      </div>
    </div>

    <%# Actions Popover %>
    <div contents data-controller="popover" data-popover-placement-value="bottom-end">
      <button type="button" class="btn btn--icon btn--subtle" data-popover-target="trigger">
        <span class="icon icon--more-horizontal" aria-hidden="true"></span>
      </button>

      <div popover class="popover" style="--popover-size: 8rem;" data-popover-target="content" role="menu">
        <div class="menu">
          <%= link_to "Edit", edit_feedback_path(feedback), class: "btn menu__item w-full text-left", data: { turbo_frame: "modal" } %>
          
          <%= button_to "Delete", feedback_path(feedback), method: :delete, class: "btn menu__item w-full text-left text-red-500", form: { data: { turbo_confirm: "Are you sure you want to delete this feedback?" } } %>
        </div>
      </div>
    </div>
  </div>

  <%# Feedback Content %>
  <div class="mis-13 mbs-2">
    <%# Badges for Type and Service %>
    <div class="flex items-center gap-2 mbe-2">
      <span class="text-xs font-medium me-2 px-2.5 py-0.5 rounded <%= badge_color %>">
        <%= feedback.feedback_type.humanize %>
      </span>
      <span class="bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded">
        <%= feedback.service.humanize %>
      </span>
    </div>

    <%# Rating (if it exists) %>
    <% if feedback.rating.present? %>
      <div class="flex items-center gap-1 mbe-2">
        <% feedback.rating.times do %>
          <svg class="w-4 h-4 text-yellow-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
            <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.455 8.52l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.545 8.52a1.523 1.523 0 0 0 .379-.895Z"/>
          </svg>
        <% end %>
        <% (5 - feedback.rating).times do %>
          <svg class="w-4 h-4 text-gray-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
            <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.455 8.52l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.545 8.52a1.523 1.523 0 0 0 .379-.895Z"/>
          </svg>
        <% end %>
      </div>
    <% end %>

    <%# The comment %>
    <p class="text-gray-700"><%= feedback.comment %></p>
  </div>
</div>